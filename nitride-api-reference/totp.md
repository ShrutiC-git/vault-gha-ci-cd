---
description: API for creating and deleting Time-based One-Time Password or TOTP.
---

# TOTP

TOTP are used to generate unique, temporary passwords as an added layer of protection when accessing sensitive keys or credentials from Nitride.

There are 2 API operations available for TOTP:

1. PUT - [Create a new TOTP](totp.md#create-a-new-totp)
2. DELETE - [Delete an existing TOTP](totp.md#deleting-an-existing-totp)

## Create a new TOTP

<mark style="color:green;">`PUT`</mark> `/v1/auth/ratls/totp`

{% hint style="warning" %}
If the auth engine is enabled at a different path use `/v1/auth/<your-path>/totp`
{% endhint %}

#### **Headers**

<table><thead><tr><th>Name</th><th>Value</th><th data-type="checkbox">Required</th></tr></thead><tbody><tr><td>Content-Type</td><td><code>application/json</code></td><td>true</td></tr><tr><td>Authorization</td><td><code>Bearer &#x3C;token></code></td><td>false</td></tr></tbody></table>

**Body**

<table><thead><tr><th>Name</th><th>Type</th><th>Description</th><th data-type="checkbox">Required</th></tr></thead><tbody><tr><td><code>created</code></td><td>integer (int64)</td><td>Creation timestamp, generated by the  Nitride plugin</td><td>true</td></tr><tr><td><code>expiration</code></td><td>integer (int64)</td><td>Expiration timestamp of the TOTP</td><td>true</td></tr><tr><td><code>policy</code></td><td>string</td><td>Name of the policy to allow updates for</td><td>true</td></tr><tr><td><code>uuid</code></td><td>string</td><td>Identifier for the totp and the token itself, generated by the Nitride plugin.</td><td>true</td></tr></tbody></table>

#### Request samples

{% tabs %}
{% tab title="Javascript" %}
```javascript
const response = await fetch('/v1/auth/ratls/totp', {
    method: 'PUT',
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      "created": 0,
      "expiration": 0,
      "policy": "text",
      "uuid": "text"
    }),
});
const data = await response.json();
```
{% endtab %}

{% tab title="cURL" %}
```bash
curl -L \
  -X PUT \
  -H 'Content-Type: application/json' \
  '/v1/auth/ratls/totp' \
  -d '{"created":0,"expiration":0,"policy":"text","uuid":"text"}'
```
{% endtab %}

{% tab title="Python" %}
```python
import requests

response = requests.put(
    "/v1/auth/ratls/totp",
    headers={"Content-Type":"application/json"},
    json={"created":0,"expiration":0,"policy":"text","uuid":"text"}
)
data = response.json()
```
{% endtab %}

{% tab title="HTTP" %}
```http
PUT /v1/auth/ratls/totp HTTP/1.1
Host: 
Content-Type: application/json
Content-Length: 58
Accept: */*

{
  "created": 0,
  "expiration": 0,
  "policy": "text",
  "uuid": "text"
}
```
{% endtab %}
{% endtabs %}

**Response samples**

{% tabs %}
{% tab title="200" %}
```json
{
  "data": {
    "created": 0,
    "expiration": 0,
    "policy": "text",
    "uuid": "text"
  }
}
```
{% endtab %}

{% tab title="400" %}
```json
{

  "statusCode": 400,

  "message": "Invalid request"

}

```
{% endtab %}
{% endtabs %}

***

## Deleting an existing TOTP

<mark style="color:green;">`DELETE`</mark>`/v1/auth/ratls/totp/{totp-uuid}`

{% hint style="warning" %}
If the auth engine is enabled at a different path use `/v1/auth/<your-path>/totp/{totp-uuid}`
{% endhint %}

**Headers**

<table><thead><tr><th>Name</th><th>Value</th><th data-type="checkbox">Required</th></tr></thead><tbody><tr><td>Authorization</td><td><code>Bearer &#x3C;token></code></td><td>false</td></tr></tbody></table>

**Path parameters**

<table><thead><tr><th>Name</th><th>Type</th><th>Description</th><th data-type="checkbox">Required</th></tr></thead><tbody><tr><td><code>totp-uuid</code></td><td>string</td><td>Identifier for the TOTP and the token itself, generated by the Nitride plugin.</td><td>true</td></tr></tbody></table>

#### Request samples

{% tabs %}
{% tab title="Javascript" %}
```javascript
const response = await fetch('/v1/auth/ratls/totp/{totp-uuid}', {
    method: 'DELETE',
    headers: {},
});
const data = await response.json();
```
{% endtab %}

{% tab title="cURL" %}
```shell
curl -L \
  -X DELETE \
  '/v1/auth/ratls/totp/{totp-uuid}'
```
{% endtab %}

{% tab title="Python" %}
```python
import requests

response = requests.delete(
    "/v1/auth/ratls/totp/{totp-uuid}",
    headers={},
)
data = response.json()
```
{% endtab %}

{% tab title="HTTP" %}
```http
DELETE /v1/auth/ratls/totp/{totp-uuid} HTTP/1.1
Host: 
Accept: */*
```
{% endtab %}
{% endtabs %}

**Response samples**

{% tabs %}
{% tab title="200" %}
```json
OK
```
{% endtab %}

{% tab title="400" %}
```json
{

  "statusCode": 400,

  "message": "Invalid request parameters: 'uuid' is required and must be a string.",

  "errors": {

    "uuid": "Missing required field"

  }

}

```
{% endtab %}
{% endtabs %}
